<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AlphaPaste ðŸš€</title>
<style>
body { 
    font-family: monospace; 
    background: #111; 
    color: #0f0; 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    padding: 2rem; 
}
textarea { 
    width: 90%; 
    height: 300px; 
    margin-bottom: 1rem; 
    background: #000; 
    color: #0f0; 
    border: none; 
    padding: 1rem; 
}
button { 
    padding: 0.5rem 1rem; 
    background: #0f0; 
    color: #000; 
    border: none; 
    cursor: pointer; 
    font-weight: bold; 
}
#linkContainer { 
    margin-top: 1rem; 
    word-break: break-all; 
}
</style>
</head>
<body>
<h1>AlphaPaste ðŸš€</h1>
<textarea id="pasteContent" placeholder="Paste your text/code here..."></textarea>
<button onclick="savePaste()">Save & Get Link</button>
<div id="linkContainer"></div>

<script>
async function savePaste() {
    const content = document.getElementById('pasteContent').value;
    if(!content) return alert("Paste something first!");

    const fileName = `paste_${Date.now()}.txt`;

    // Trigger GitHub Action via repository_dispatch
    const res = await fetch("https://api.github.com/repos/JUJUx1/Alphapaste/dispatches", {
        method: "POST",
        headers: {
            "Accept": "application/vnd.github+json",
            "Authorization": "token YOUR_TEST_TOKEN_HERE" // Use PAT for testing, remove for production later
        },
        body: JSON.stringify({
            event_type: "create_paste",
            client_payload: { fileName, content }
        })
    });

    if(res.ok){
        const link = `https://raw.githubusercontent.com/JUJUx1/Alphapaste/main/${fileName}`;
        document.getElementById("linkContainer").innerHTML =
            `<a href="${link}" target="_blank">Your Paste Link</a>`;
    } else {
        const err = await res.json();
        alert("Error saving paste: " + (err.message || JSON.stringify(err)));
    }
}
</script>
</body>
</html>
